{"ast":null,"code":"import _classCallCheck from \"/home/leonardo_freitas/Desktop/Programa\\xE7\\xE3o/MetasCertas/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/leonardo_freitas/Desktop/Programa\\xE7\\xE3o/MetasCertas/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/leonardo_freitas/Desktop/Programa\\xE7\\xE3o/MetasCertas/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/leonardo_freitas/Desktop/Programa\\xE7\\xE3o/MetasCertas/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/leonardo_freitas/Desktop/Programa\\xE7\\xE3o/MetasCertas/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/leonardo_freitas/Desktop/Programa\\xE7\\xE3o/MetasCertas/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/leonardo_freitas/Desktop/Programa\\xE7\\xE3o/MetasCertas/src/containers/Page/signin.js\";\nimport React, { Component } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport Input from '../../components/uielements/input';\nimport Checkbox from '../../components/uielements/checkbox';\nimport Button from '../../components/uielements/button';\nimport IntlMessages from '../../components/utility/intlMessages';\nimport SignInStyleWrapper from './signin.style';\nimport notification from '../../components/notification';\n\nvar SignIn =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SignIn, _Component);\n\n  function SignIn() {\n    var _this;\n\n    _classCallCheck(this, SignIn);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SignIn).call(this));\n    _this.state = {\n      canSubmit: false\n    };\n    _this.submit = _this.submit.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(SignIn, [{\n    key: \"submit\",\n    value: function submit(event) {\n      var cpf_cnpj = document.getElementById('cpf_cnpj').value;\n      var password = document.getElementById('password').value;\n      var requestInfo = {\n        method: 'POST',\n        body: JSON.stringify({\n          cpf_cnpj: cpf_cnpj,\n          senha: password\n        }),\n        headers: new Headers({\n          'Content-type': 'application/json'\n        })\n      };\n      fetch('/login', requestInfo).then(function (resp) {\n        if (resp.ok) {\n          return resp.text();\n        } else {\n          return notification('error', 'Usuário ou senha inválidos!');\n        }\n      }).then(function (token) {\n        return localStorage.setItem(\"token\", token);\n      }).catch(function (err) {\n        console.log(err);\n        localStorage.setItem('canSubmit', false);\n        return notification('error', 'Usuário ou senha inválidos!');\n      });\n    }\n  }, {\n    key: \"canSubmit\",\n    value: function canSubmit() {\n      var cpf_cnpj = document.getElementById('cpf_cnpj').value;\n      var password = document.getElementById('password').value;\n      var enter = new SignIn();\n\n      if (cpf_cnpj === '' || password === '') {\n        return notification('warning', 'Você deve preencher todos os campos!');\n      } else {\n        return enter.submit();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (localStorage.getItem('token') !== null && localStorage.getItem('token') !== 'undefined') {\n        return React.createElement(Redirect, {\n          to: \"/dashboard\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(SignInStyleWrapper, {\n        className: \"isoSignInPage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"isoLoginContentWrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"isoLoginContent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"isoLogoWrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/dashboard\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(IntlMessages, {\n        id: \"page.signInTitle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"isoSignInForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.canSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"isoInputWrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(Input, {\n        id: \"cpf_cnpj\",\n        size: \"large\",\n        placeholder: \"cpf\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"isoInputWrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(Input, {\n        id: \"password\",\n        size: \"large\",\n        type: \"password\",\n        placeholder: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"isoInputWrapper isoLeftRightComponent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(Checkbox, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(IntlMessages, {\n        id: \"page.signInRememberMe\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      })), React.createElement(Button, {\n        onClick: this.canSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(IntlMessages, {\n        id: \"page.signInButton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"isoCenterComponent isoHelperWrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/forgotpassword\",\n        className: \"isoForgotPass\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(IntlMessages, {\n        id: \"Esqueceu a senha?\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }))))))));\n    }\n  }]);\n\n  return SignIn;\n}(Component);\n\nexport default SignIn;\nexport var isAutenticade = function isAutenticade() {\n  if (localStorage.getItem('token') !== null && localStorage.getItem('token') !== 'undefined') {\n    return true;\n  } else {\n    return false;\n  }\n};","map":{"version":3,"sources":["/home/leonardo_freitas/Desktop/Programação/MetasCertas/src/containers/Page/signin.js"],"names":["React","Component","Link","Redirect","Input","Checkbox","Button","IntlMessages","SignInStyleWrapper","notification","SignIn","state","canSubmit","submit","bind","event","cpf_cnpj","document","getElementById","value","password","requestInfo","method","body","JSON","stringify","senha","headers","Headers","fetch","then","resp","ok","text","token","localStorage","setItem","catch","err","console","log","enter","getItem","isAutenticade"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport Input from '../../components/uielements/input';\nimport Checkbox from '../../components/uielements/checkbox';\nimport Button from '../../components/uielements/button';\nimport IntlMessages from '../../components/utility/intlMessages';\nimport SignInStyleWrapper from './signin.style';\nimport notification from '../../components/notification';\n\nclass SignIn extends Component {\nconstructor(){\nsuper();\n\nthis.state = {\n  canSubmit: false\n};\nthis.submit = this.submit.bind(this);\n}\n\n  submit(event){ \nconst cpf_cnpj = document.getElementById('cpf_cnpj').value\nconst password = document.getElementById('password').value\n\nconst requestInfo = {\n      \n      method: 'POST',\n      body: JSON.stringify({ \n        cpf_cnpj: cpf_cnpj,\n        senha: password,\n       }),\n       headers: new Headers({\n        'Content-type':'application/json'\n      })\n    }\n    \n    fetch('/login', requestInfo)\n    \n    .then(resp => {\n      if (resp.ok) {\n        \n        \n       return resp.text()\n        \n    }else{\n      return notification('error', 'Usuário ou senha inválidos!')\n    }\n        \n    }).then( token => {\n      return localStorage.setItem(\"token\", token)\n      \n}).catch(err =>{\n  console.log(err)\n  localStorage.setItem('canSubmit', false);\n  return notification('error', 'Usuário ou senha inválidos!')\n})\n\n  }\n  canSubmit(){\n    const cpf_cnpj = document.getElementById('cpf_cnpj').value\n    const password = document.getElementById('password').value\n  \n    const enter = new SignIn()\n   if(cpf_cnpj === '' || password === ''){\n     return notification('warning', 'Você deve preencher todos os campos!')\n   }else{\n      return enter.submit()\n   }\n}\n\n\n  render() {\n    \n    if (localStorage.getItem('token') !== null && localStorage.getItem('token') !== 'undefined') {\n  return <Redirect to='/dashboard'></Redirect>;\n}\n    return (\n     \n      <SignInStyleWrapper className=\"isoSignInPage\">\n      \n        <div className=\"isoLoginContentWrapper\">\n          <div className=\"isoLoginContent\">\n            <div className=\"isoLogoWrapper\">\n              <Link to=\"/dashboard\">\n                <IntlMessages id=\"page.signInTitle\" />\n              </Link>\n              \n            </div>\n             \n            <div className=\"isoSignInForm\">\n            <form onSubmit={this.canSubmit}>\n            \n              <div className=\"isoInputWrapper\">\n              \n                <Input id=\"cpf_cnpj\" size=\"large\"  placeholder=\"cpf\"  />\n              </div>\n\n              <div className=\"isoInputWrapper\">\n                <Input id=\"password\" size=\"large\" type=\"password\" placeholder=\"Password\" />\n              </div>\n\n              <div className=\"isoInputWrapper isoLeftRightComponent\">\n                <Checkbox>\n                  <IntlMessages id=\"page.signInRememberMe\" />\n                </Checkbox>\n                \n                <Button  onClick={this.canSubmit}>\n                \n                  <IntlMessages id=\"page.signInButton\" />\n                  \n                </Button>\n              \n              </div>\n              \n              <div className=\"isoCenterComponent isoHelperWrapper\">\n                <Link to=\"/forgotpassword\" className=\"isoForgotPass\">\n                  <IntlMessages id=\"Esqueceu a senha?\" />\n                </Link>\n                \n              </div>\n              </form>\n            </div>\n          </div>\n        </div>\n        \n      </SignInStyleWrapper>\n    );\n  }\n}\n\nexport default (SignIn);\n\nexport const isAutenticade = () => {if(localStorage.getItem('token') !== null && localStorage.getItem('token') !== 'undefined') {\n  return true\n  }else{\n    return false\n  }\n}"]},"metadata":{},"sourceType":"module"}