{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nexports.load = load;\nexports.preload = preload;\n\nvar _auth0Js = require('auth0-js');\n\nvar _auth0Js2 = _interopRequireDefault(_auth0Js);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nif (!global.Auth0) {\n  global.Auth0 = {};\n}\n\nvar cbs = {};\n\nfunction load(attrs) {\n  var cb = attrs.cb,\n      check = attrs.check,\n      method = attrs.method,\n      url = attrs.url;\n\n  if (!cbs[method]) {\n    cbs[method] = [];\n\n    global.Auth0[method] = function () {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      cbs[method] = cbs[method].filter(function (x) {\n        if (x.check.apply(x, args)) {\n          setTimeout(function () {\n            return x.cb.apply(x, [null].concat(args));\n          }, 0);\n          return false;\n        } else {\n          return true;\n        }\n      });\n    };\n  }\n\n  cbs[method].push({\n    cb: cb,\n    check: check,\n    url: url\n  });\n  var count = cbs[method].reduce(function (r, x) {\n    return r + (x.url === url ? 1 : 0);\n  }, 0);\n  if (count > 1) return;\n  var script = global.document.createElement('script');\n  script.src = url;\n  global.document.getElementsByTagName('head')[0].appendChild(script);\n\n  var handleError = function handleError(err) {\n    cbs[method] = cbs[method].filter(function (x) {\n      if (x.url === url) {\n        setTimeout(function () {\n          return x.cb(err);\n        }, 0);\n        return false;\n      } else {\n        return true;\n      }\n    });\n  };\n\n  var timeoutID = setTimeout(function () {\n    return handleError(new Error(url + ' timed out'));\n  }, 20000);\n  script.addEventListener('load', function () {\n    return clearTimeout(timeoutID);\n  });\n  script.addEventListener('error', function () {\n    clearTimeout(timeoutID);\n    handleError(new Error(url + ' could not be loaded.'));\n  });\n}\n\nfunction preload(_ref) {\n  var method = _ref.method,\n      cb = _ref.cb;\n  global.Auth0[method] = cb;\n}","map":null,"metadata":{},"sourceType":"script"}