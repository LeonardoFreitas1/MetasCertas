{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nexports.validateEmail = validateEmail;\nexports.isEmail = isEmail;\nexports.setEmail = setEmail;\nexports.emailDomain = emailDomain;\nexports.emailLocalPart = emailLocalPart;\n\nvar _trim = require('trim');\n\nvar _trim2 = _interopRequireDefault(_trim);\n\nvar _index = require('./index');\n\nvar _string_utils = require('../utils/string_utils');\n\nvar _enterprise = require('../connection/enterprise');\n\nvar _i18n = require('../i18n');\n\nvar i18n = _interopRequireWildcard(_i18n);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar regExp = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\nfunction validateEmail(str) {\n  return isEmail(str);\n}\n\nfunction isEmail(str) {\n  var result = regExp.exec((0, _trim2.default)(str.toLowerCase()));\n  return !!result && result[0] !== null;\n}\n\nfunction setEmail(m, str) {\n  return (0, _index.setField)(m, 'email', str, function (str) {\n    var validHRDEMail = (0, _enterprise.isHRDEmailValid)(m, str);\n    return {\n      valid: validateEmail(str) && validHRDEMail,\n      hint: !validHRDEMail ? i18n.html(m, ['error', 'login', 'hrd.not_matching_email']) : undefined\n    };\n  });\n}\n\nfunction emailDomain(str) {\n  var result = regExp.exec((0, _trim2.default)(str.toLowerCase()));\n  return result ? result.slice(-2)[0] : '';\n}\n\nfunction emailLocalPart(str) {\n  var domain = emailDomain(str);\n  return domain ? str.slice(0, -1 - domain.length) : str;\n}","map":null,"metadata":{},"sourceType":"script"}