{"ast":null,"code":"/**\n * auth0-js v9.10.2\n * Author: Auth0\n * Date: 2019-04-15\n * License: MIT\n */\n!function (global, factory) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = factory() : \"function\" == typeof define && define.amd ? define(factory) : global.CordovaAuth0Plugin = factory();\n}(this, function () {\n  \"use strict\";\n\n  var version = {\n    raw: \"9.10.2\"\n  },\n      toString = Object.prototype.toString;\n\n  function attribute(o, attr, type, text) {\n    if (type = \"array\" === type ? \"object\" : type, o && typeof o[attr] !== type) throw new Error(text);\n  }\n\n  function variable(o, type, text) {\n    if (typeof o !== type) throw new Error(text);\n  }\n\n  function value(o, values, text) {\n    if (-1 === values.indexOf(o)) throw new Error(text);\n  }\n\n  var assert = {\n    check: function check(o, config, attributes) {\n      if (config.optional && !o || variable(o, config.type, config.message), \"object\" === config.type && attributes) for (var keys = Object.keys(attributes), index = 0; index < keys.length; index++) {\n        var a = keys[index];\n        attributes[a].optional && !o[a] || attributes[a].condition && !attributes[a].condition(o) || (attribute(o, a, attributes[a].type, attributes[a].message), attributes[a].values && value(o[a], attributes[a].values, attributes[a].value_message));\n      }\n    },\n    attribute: attribute,\n    variable: variable,\n    value: value,\n    isArray: function isArray(array) {\n      return this.supportsIsArray() ? Array.isArray(array) : \"[object Array]\" === toString.call(array);\n    },\n    supportsIsArray: function supportsIsArray() {\n      return null != Array.isArray;\n    }\n  };\n\n  function objectAssignPolyfill(target) {\n    if (null == target) throw new TypeError(\"Cannot convert first argument to object\");\n\n    for (var to = Object(target), i = 1; i < arguments.length; i++) {\n      var nextSource = arguments[i];\n      if (null != nextSource) for (var keysArray = Object.keys(Object(nextSource)), nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\n        var nextKey = keysArray[nextIndex],\n            desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n        void 0 !== desc && desc.enumerable && (to[nextKey] = nextSource[nextKey]);\n      }\n    }\n\n    return to;\n  }\n\n  var objectAssign = {\n    get: function get() {\n      return Object.assign ? Object.assign : objectAssignPolyfill;\n    },\n    objectAssignPolyfill: objectAssignPolyfill\n  };\n\n  function pick(object, keys) {\n    return keys.reduce(function (prev, key) {\n      return object[key] && (prev[key] = object[key]), prev;\n    }, {});\n  }\n\n  function extend() {\n    var params = function (obj) {\n      var values = [];\n\n      for (var key in obj) {\n        values.push(obj[key]);\n      }\n\n      return values;\n    }(arguments);\n\n    return params.unshift({}), objectAssign.get().apply(void 0, params);\n  }\n\n  function getLocationFromUrl(href) {\n    var match = href.match(/^(https?:|file:)\\/\\/(([^:\\/?#]*)(?::([0-9]+))?)([\\/]{0,1}[^?#]*)(\\?[^#]*|)(#.*|)$/);\n    return match && {\n      href: href,\n      protocol: match[1],\n      host: match[2],\n      hostname: match[3],\n      port: match[4],\n      pathname: match[5],\n      search: match[6],\n      hash: match[7]\n    };\n  }\n\n  function trim(options, key) {\n    var trimmed = extend(options);\n    return options[key] && (trimmed[key] = options[key].trim()), trimmed;\n  }\n\n  var objectHelper = {\n    toSnakeCase: function toSnakeCase(object, exceptions) {\n      return \"object\" != typeof object || assert.isArray(object) || null === object ? object : (exceptions = exceptions || [], Object.keys(object).reduce(function (p, key) {\n        return p[-1 === exceptions.indexOf(key) ? function (str) {\n          for (var code, newKey = \"\", index = 0, wasPrevNumber = !0, wasPrevUppercase = !0; index < str.length;) {\n            code = str.charCodeAt(index), !wasPrevUppercase && code >= 65 && code <= 90 || !wasPrevNumber && code >= 48 && code <= 57 ? (newKey += \"_\", newKey += str[index].toLowerCase()) : newKey += str[index].toLowerCase(), wasPrevNumber = code >= 48 && code <= 57, wasPrevUppercase = code >= 65 && code <= 90, index++;\n          }\n\n          return newKey;\n        }(key) : key] = toSnakeCase(object[key]), p;\n      }, {}));\n    },\n    toCamelCase: function toCamelCase(object, exceptions, options) {\n      return \"object\" != typeof object || assert.isArray(object) || null === object ? object : (exceptions = exceptions || [], options = options || {}, Object.keys(object).reduce(function (p, key) {\n        var parts,\n            newKey = -1 === exceptions.indexOf(key) ? (parts = key.split(\"_\")).reduce(function (p, c) {\n          return p + c.charAt(0).toUpperCase() + c.slice(1);\n        }, parts.shift()) : key;\n        return p[newKey] = toCamelCase(object[newKey] || object[key], [], options), options.keepOriginal && (p[key] = toCamelCase(object[key], [], options)), p;\n      }, {}));\n    },\n    blacklist: function blacklist(object, blacklistedKeys) {\n      return Object.keys(object).reduce(function (p, key) {\n        return -1 === blacklistedKeys.indexOf(key) && (p[key] = object[key]), p;\n      }, {});\n    },\n    merge: function merge(object, keys) {\n      return {\n        base: keys ? pick(object, keys) : object,\n        with: function _with(object2, keys2) {\n          return object2 = keys2 ? pick(object2, keys2) : object2, extend(this.base, object2);\n        }\n      };\n    },\n    pick: pick,\n    getKeysNotIn: function getKeysNotIn(obj, allowedKeys) {\n      var notAllowed = [];\n\n      for (var key in obj) {\n        -1 === allowedKeys.indexOf(key) && notAllowed.push(key);\n      }\n\n      return notAllowed;\n    },\n    extend: extend,\n    getOriginFromUrl: function getOriginFromUrl(url) {\n      if (url) {\n        var parsed = getLocationFromUrl(url),\n            origin = parsed.protocol + \"//\" + parsed.hostname;\n        return parsed.port && (origin += \":\" + parsed.port), origin;\n      }\n    },\n    getLocationFromUrl: getLocationFromUrl,\n    trimUserDetails: function trimUserDetails(options) {\n      return function (options, keys) {\n        return keys.reduce(trim, options);\n      }(options, [\"username\", \"email\", \"phoneNumber\"]);\n    }\n  };\n\n  function getWindow() {\n    return window;\n  }\n\n  var windowHandler = {\n    redirect: function redirect(url) {\n      getWindow().location = url;\n    },\n    getDocument: function getDocument() {\n      return getWindow().document;\n    },\n    getWindow: getWindow,\n    getOrigin: function getOrigin() {\n      var location = getWindow().location,\n          origin = location.origin;\n      return origin || (origin = objectHelper.getOriginFromUrl(location.href)), origin;\n    }\n  },\n      commonjsGlobal = \"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : {};\n\n  function createCommonjsModule(fn, module) {\n    return fn(module = {\n      exports: {}\n    }, module.exports), module.exports;\n  }\n\n  var urlJoin = createCommonjsModule(function (module) {\n    var context, definition;\n    context = commonjsGlobal, definition = function definition() {\n      return function () {\n        return function (strArray) {\n          var resultArray = [];\n\n          if (strArray[0].match(/^[^\\/:]+:\\/*$/) && strArray.length > 1) {\n            var first = strArray.shift();\n            strArray[0] = first + strArray[0];\n          }\n\n          strArray[0].match(/^file:\\/\\/\\//) ? strArray[0] = strArray[0].replace(/^([^\\/:]+):\\/*/, \"$1:///\") : strArray[0] = strArray[0].replace(/^([^\\/:]+):\\/*/, \"$1://\");\n\n          for (var i = 0; i < strArray.length; i++) {\n            var component = strArray[i];\n            if (\"string\" != typeof component) throw new TypeError(\"Url must be a string. Received \" + component);\n            \"\" !== component && (i > 0 && (component = component.replace(/^[\\/]+/, \"\")), component = i < strArray.length - 1 ? component.replace(/[\\/]+$/, \"\") : component.replace(/[\\/]+$/, \"/\"), resultArray.push(component));\n          }\n\n          var str = resultArray.join(\"/\"),\n              parts = (str = str.replace(/\\/(\\?|&|#[^!])/g, \"$1\")).split(\"?\");\n          return str = parts.shift() + (parts.length > 0 ? \"?\" : \"\") + parts.join(\"&\");\n        }(\"object\" == typeof arguments[0] ? arguments[0] : [].slice.call(arguments));\n      };\n    }, module.exports ? module.exports = definition() : context.urljoin = definition();\n  }),\n      utils = createCommonjsModule(function (module, exports) {\n    var has = Object.prototype.hasOwnProperty,\n        hexTable = function () {\n      for (var array = [], i = 0; i < 256; ++i) {\n        array.push(\"%\" + ((i < 16 ? \"0\" : \"\") + i.toString(16)).toUpperCase());\n      }\n\n      return array;\n    }();\n\n    exports.arrayToObject = function (source, options) {\n      for (var obj = options && options.plainObjects ? Object.create(null) : {}, i = 0; i < source.length; ++i) {\n        void 0 !== source[i] && (obj[i] = source[i]);\n      }\n\n      return obj;\n    }, exports.merge = function (target, source, options) {\n      if (!source) return target;\n\n      if (\"object\" != typeof source) {\n        if (Array.isArray(target)) target.push(source);else {\n          if (\"object\" != typeof target) return [target, source];\n          (options.plainObjects || options.allowPrototypes || !has.call(Object.prototype, source)) && (target[source] = !0);\n        }\n        return target;\n      }\n\n      if (\"object\" != typeof target) return [target].concat(source);\n      var mergeTarget = target;\n      return Array.isArray(target) && !Array.isArray(source) && (mergeTarget = exports.arrayToObject(target, options)), Array.isArray(target) && Array.isArray(source) ? (source.forEach(function (item, i) {\n        has.call(target, i) ? target[i] && \"object\" == typeof target[i] ? target[i] = exports.merge(target[i], item, options) : target.push(item) : target[i] = item;\n      }), target) : Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n        return Object.prototype.hasOwnProperty.call(acc, key) ? acc[key] = exports.merge(acc[key], value, options) : acc[key] = value, acc;\n      }, mergeTarget);\n    }, exports.decode = function (str) {\n      try {\n        return decodeURIComponent(str.replace(/\\+/g, \" \"));\n      } catch (e) {\n        return str;\n      }\n    }, exports.encode = function (str) {\n      if (0 === str.length) return str;\n\n      for (var string = \"string\" == typeof str ? str : String(str), out = \"\", i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n        45 === c || 46 === c || 95 === c || 126 === c || c >= 48 && c <= 57 || c >= 65 && c <= 90 || c >= 97 && c <= 122 ? out += string.charAt(i) : c < 128 ? out += hexTable[c] : c < 2048 ? out += hexTable[192 | c >> 6] + hexTable[128 | 63 & c] : c < 55296 || c >= 57344 ? out += hexTable[224 | c >> 12] + hexTable[128 | c >> 6 & 63] + hexTable[128 | 63 & c] : (i += 1, c = 65536 + ((1023 & c) << 10 | 1023 & string.charCodeAt(i)), out += hexTable[240 | c >> 18] + hexTable[128 | c >> 12 & 63] + hexTable[128 | c >> 6 & 63] + hexTable[128 | 63 & c]);\n      }\n\n      return out;\n    }, exports.compact = function (obj, references) {\n      if (\"object\" != typeof obj || null === obj) return obj;\n      var refs = references || [],\n          lookup = refs.indexOf(obj);\n      if (-1 !== lookup) return refs[lookup];\n\n      if (refs.push(obj), Array.isArray(obj)) {\n        for (var compacted = [], i = 0; i < obj.length; ++i) {\n          obj[i] && \"object\" == typeof obj[i] ? compacted.push(exports.compact(obj[i], refs)) : void 0 !== obj[i] && compacted.push(obj[i]);\n        }\n\n        return compacted;\n      }\n\n      return Object.keys(obj).forEach(function (key) {\n        obj[key] = exports.compact(obj[key], refs);\n      }), obj;\n    }, exports.isRegExp = function (obj) {\n      return \"[object RegExp]\" === Object.prototype.toString.call(obj);\n    }, exports.isBuffer = function (obj) {\n      return null != obj && !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n    };\n  }),\n      replace = (utils.arrayToObject, utils.merge, utils.decode, utils.encode, utils.compact, utils.isRegExp, utils.isBuffer, String.prototype.replace),\n      percentTwenties = /%20/g,\n      formats = {\n    default: \"RFC3986\",\n    formatters: {\n      RFC1738: function RFC1738(value) {\n        return replace.call(value, percentTwenties, \"+\");\n      },\n      RFC3986: function RFC3986(value) {\n        return value;\n      }\n    },\n    RFC1738: \"RFC1738\",\n    RFC3986: \"RFC3986\"\n  },\n      arrayPrefixGenerators = {\n    brackets: function brackets(prefix) {\n      return prefix + \"[]\";\n    },\n    indices: function indices(prefix, key) {\n      return prefix + \"[\" + key + \"]\";\n    },\n    repeat: function repeat(prefix) {\n      return prefix;\n    }\n  },\n      toISO = Date.prototype.toISOString,\n      defaults = {\n    delimiter: \"&\",\n    encode: !0,\n    encoder: utils.encode,\n    encodeValuesOnly: !1,\n    serializeDate: function serializeDate(date) {\n      return toISO.call(date);\n    },\n    skipNulls: !1,\n    strictNullHandling: !1\n  },\n      stringify = function stringify(object, prefix, generateArrayPrefix, strictNullHandling, skipNulls, encoder, filter, sort, allowDots, serializeDate, formatter, encodeValuesOnly) {\n    var obj = object;\n    if (\"function\" == typeof filter) obj = filter(prefix, obj);else if (obj instanceof Date) obj = serializeDate(obj);else if (null === obj) {\n      if (strictNullHandling) return encoder && !encodeValuesOnly ? encoder(prefix) : prefix;\n      obj = \"\";\n    }\n    if (\"string\" == typeof obj || \"number\" == typeof obj || \"boolean\" == typeof obj || utils.isBuffer(obj)) return encoder ? [formatter(encodeValuesOnly ? prefix : encoder(prefix)) + \"=\" + formatter(encoder(obj))] : [formatter(prefix) + \"=\" + formatter(String(obj))];\n    var objKeys,\n        values = [];\n    if (void 0 === obj) return values;\n    if (Array.isArray(filter)) objKeys = filter;else {\n      var keys = Object.keys(obj);\n      objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n      var key = objKeys[i];\n      skipNulls && null === obj[key] || (values = Array.isArray(obj) ? values.concat(stringify(obj[key], generateArrayPrefix(prefix, key), generateArrayPrefix, strictNullHandling, skipNulls, encoder, filter, sort, allowDots, serializeDate, formatter, encodeValuesOnly)) : values.concat(stringify(obj[key], prefix + (allowDots ? \".\" + key : \"[\" + key + \"]\"), generateArrayPrefix, strictNullHandling, skipNulls, encoder, filter, sort, allowDots, serializeDate, formatter, encodeValuesOnly)));\n    }\n\n    return values;\n  },\n      lib_stringify = (Object.prototype.hasOwnProperty, utils.decode, function (object, opts) {\n    var obj = object,\n        options = opts || {};\n    if (null !== options.encoder && void 0 !== options.encoder && \"function\" != typeof options.encoder) throw new TypeError(\"Encoder has to be a function.\");\n    var delimiter = void 0 === options.delimiter ? defaults.delimiter : options.delimiter,\n        strictNullHandling = \"boolean\" == typeof options.strictNullHandling ? options.strictNullHandling : defaults.strictNullHandling,\n        skipNulls = \"boolean\" == typeof options.skipNulls ? options.skipNulls : defaults.skipNulls,\n        encode = \"boolean\" == typeof options.encode ? options.encode : defaults.encode,\n        encoder = \"function\" == typeof options.encoder ? options.encoder : defaults.encoder,\n        sort = \"function\" == typeof options.sort ? options.sort : null,\n        allowDots = void 0 !== options.allowDots && options.allowDots,\n        serializeDate = \"function\" == typeof options.serializeDate ? options.serializeDate : defaults.serializeDate,\n        encodeValuesOnly = \"boolean\" == typeof options.encodeValuesOnly ? options.encodeValuesOnly : defaults.encodeValuesOnly;\n    if (void 0 === options.format) options.format = formats.default;else if (!Object.prototype.hasOwnProperty.call(formats.formatters, options.format)) throw new TypeError(\"Unknown format option provided.\");\n    var objKeys,\n        filter,\n        formatter = formats.formatters[options.format];\n    \"function\" == typeof options.filter ? obj = (filter = options.filter)(\"\", obj) : Array.isArray(options.filter) && (objKeys = filter = options.filter);\n    var arrayFormat,\n        keys = [];\n    if (\"object\" != typeof obj || null === obj) return \"\";\n    arrayFormat = options.arrayFormat in arrayPrefixGenerators ? options.arrayFormat : \"indices\" in options ? options.indices ? \"indices\" : \"repeat\" : \"indices\";\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n    objKeys || (objKeys = Object.keys(obj)), sort && objKeys.sort(sort);\n\n    for (var i = 0; i < objKeys.length; ++i) {\n      var key = objKeys[i];\n      skipNulls && null === obj[key] || (keys = keys.concat(stringify(obj[key], key, generateArrayPrefix, strictNullHandling, skipNulls, encode ? encoder : null, filter, sort, allowDots, serializeDate, formatter, encodeValuesOnly)));\n    }\n\n    return keys.join(delimiter);\n  });\n\n  function PopupHandler(webAuth) {\n    this.webAuth = webAuth, this._current_popup = null, this.options = null;\n  }\n\n  function PluginHandler(webAuth) {\n    this.webAuth = webAuth;\n  }\n\n  function CordovaPlugin() {\n    this.webAuth = null, this.version = version.raw, this.extensibilityPoints = [\"popup.authorize\", \"popup.getPopupHandler\"];\n  }\n\n  return PopupHandler.prototype.preload = function (options) {\n    var _this = this,\n        _window = windowHandler.getWindow(),\n        url = options.url || \"about:blank\",\n        popupOptions = options.popupOptions || {};\n\n    popupOptions.location = \"yes\", delete popupOptions.width, delete popupOptions.height;\n    var windowFeatures = lib_stringify(popupOptions, {\n      encode: !1,\n      delimiter: \",\"\n    });\n    return this._current_popup && !this._current_popup.closed ? this._current_popup : (this._current_popup = _window.open(url, \"_blank\", windowFeatures), this._current_popup.kill = function (success) {\n      _this._current_popup.success = success, this.close(), _this._current_popup = null;\n    }, this._current_popup);\n  }, PopupHandler.prototype.load = function (url, _, options, cb) {\n    var _this = this;\n\n    this.url = url, this.options = options, this._current_popup ? this._current_popup.location.href = url : (options.url = url, this.preload(options)), this.transientErrorHandler = function (event) {\n      _this.errorHandler(event, cb);\n    }, this.transientStartHandler = function (event) {\n      _this.startHandler(event, cb);\n    }, this.transientExitHandler = function () {\n      _this.exitHandler(cb);\n    }, this._current_popup.addEventListener(\"loaderror\", this.transientErrorHandler), this._current_popup.addEventListener(\"loadstart\", this.transientStartHandler), this._current_popup.addEventListener(\"exit\", this.transientExitHandler);\n  }, PopupHandler.prototype.errorHandler = function (event, cb) {\n    this._current_popup && (this._current_popup.kill(!0), cb({\n      error: \"window_error\",\n      errorDescription: event.message\n    }));\n  }, PopupHandler.prototype.unhook = function () {\n    this._current_popup.removeEventListener(\"loaderror\", this.transientErrorHandler), this._current_popup.removeEventListener(\"loadstart\", this.transientStartHandler), this._current_popup.removeEventListener(\"exit\", this.transientExitHandler);\n  }, PopupHandler.prototype.exitHandler = function (cb) {\n    this._current_popup && (this.unhook(), this._current_popup.success || cb({\n      error: \"window_closed\",\n      errorDescription: \"Browser window closed\"\n    }));\n  }, PopupHandler.prototype.startHandler = function (event, cb) {\n    var _this = this;\n\n    if (this._current_popup) {\n      var callbackUrl = urlJoin(\"https:\", this.webAuth.baseOptions.domain, \"/mobile\");\n\n      if (!event.url || 0 === event.url.indexOf(callbackUrl + \"#\")) {\n        var parts = event.url.split(\"#\");\n\n        if (1 !== parts.length) {\n          var opts = {\n            hash: parts.pop()\n          };\n          this.options.nonce && (opts.nonce = this.options.nonce), this.webAuth.parseHash(opts, function (error, result) {\n            (error || result) && (_this._current_popup.kill(!0), cb(error, result));\n          });\n        }\n      }\n    }\n  }, PluginHandler.prototype.processParams = function (params) {\n    return params.redirectUri = urlJoin(\"https://\" + params.domain, \"mobile\"), delete params.owp, params;\n  }, PluginHandler.prototype.getPopupHandler = function () {\n    return new PopupHandler(this.webAuth);\n  }, CordovaPlugin.prototype.setWebAuth = function (webAuth) {\n    this.webAuth = webAuth;\n  }, CordovaPlugin.prototype.supports = function (extensibilityPoint) {\n    var _window = windowHandler.getWindow();\n\n    return (!!_window.cordova || !!_window.electron) && this.extensibilityPoints.indexOf(extensibilityPoint) > -1;\n  }, CordovaPlugin.prototype.init = function () {\n    return new PluginHandler(this.webAuth);\n  }, CordovaPlugin;\n});","map":null,"metadata":{},"sourceType":"script"}